<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-139317028-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-139317028-1');
  </script>


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>OpenCV Renk Tespiti ile Thanosâ€™u BulalÄ±m | Cihan BosnalÄ±</title>

  <!-- Bootstrap core CSS -->
  <link href="../vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

  <!-- Custom fonts for this template -->
  <link href="../vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
  <link href='https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

  <!-- Custom styles for this template -->
  <link href="../css/clean-blog.min.css" rel="stylesheet">

</head>

<body>

   <!-- Navigation -->
   <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
    <div class="container">
      <a class="navbar-brand" href="../tr.html">Cihan Alperen BosnalÄ±</a>
      <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
        Menu
        <i class="fas fa-bars"></i>
      </button>
      <div class="collapse navbar-collapse" id="navbarResponsive">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item">
            <a class="nav-link" href="../tr.html">Anasayfa</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="../hakkimda.html">HakkÄ±mda</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="../iletisim.html">Ä°letiÅŸim</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="../index.html">EN</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Page Header -->
  <header class="masthead" style="background-image: url('../img/Thanos.jpg')">
    <div class="overlay"></div>
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-md-10 mx-auto">
          <div class="post-heading">
            <h1>OpenCV Renk Tespiti ile Thanosâ€™u BulalÄ±m!</h1>
            <h2 class="subheading">Renkleri algÄ±lamak iÃ§in Python ve OpenCV kullanalÄ±m.</h2>
            <span class="meta">6 MayÄ±s 2019 tarihinde yayÄ±nlandÄ±.</span>
          </div>
        </div>
      </div>
    </div>
  </header>

  <!-- Post Content -->
  <article>
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-md-10 mx-auto">
          <p>Herkese merhaba, Tony Starkâ€™Ä±n Thanosâ€™u aramak iÃ§in yeni bir sisteme ihtiyacÄ± var. Thanos yaÅŸayanlarÄ±n yarÄ±sÄ±nÄ± yok ettikten sonra baÅŸka bir gezegene kaÃ§tÄ±. Starkâ€™Ä±n drone'larÄ± her yerde onu arÄ±yorlar ama aldÄ±klarÄ± gÃ¶rÃ¼ntÃ¼leri analiz edip Thanosâ€™un olup olmadÄ±ÄŸÄ±na karar verecek bir sistemleri yok! Bunu bizim yapmamÄ±zÄ± istiyor.</p>

          <p>Deli Titanâ€™Ä± tespit etmek iÃ§in mor rengini kullanacaÄŸÄ±z. KullanacaÄŸÄ±mÄ±z yazÄ±lÄ±m dili Python ve kÃ¼tÃ¼phanelerimiz OpenCV ile Numpy.</p>

          <a href="../img/Thanos.jpg">
            <img class="img-fluid" src="../img/Thanos.jpg" alt="">
          </a>
          <span class="caption text-muted"> Testlerimiz iÃ§in <a href="https://www.theverge.com/2018/3/16/17130846/infinity-wars-trailer-thanos-cgi-supervillains-mcu-characters">bu fotoÄŸrafÄ±</a> kullanacaÄŸÄ±z.</span>

          <p>Haydi baÅŸlayalÄ±m!</p>

          <p>Ã–ncelikle bilgisayarÄ±nÄ±zda Python, OpenCV ve Numpy yÃ¼klÃ¼ olduÄŸuna emin olun.</p>

          <p>Ä°lk Ã¶nce gerekli kÃ¼tÃ¼phanelerimizi kodumuza eklememiz gerekli:</p>

          <pre><code>
              import cv2
              import numpy as np
            </code></pre>

          <p>FotoÄŸrafÄ± almak, Thanos olma ÅŸansÄ±nÄ± hesaplamak ve bir cevap dÃ¶ndÃ¼rmek iÃ§in bir Ã§alÄ±ÅŸma dÃ¶ngÃ¼sÃ¼ne ihtiyacÄ±mÄ±z var. Bunu â€œrun()â€ fonksiyonunda yapacaÄŸÄ±z.</p>

          <pre><code>
              def find_thanos(photo_name):
                # GÃ¶rÃ¼ntÃ¼yÃ¼ burada iÅŸleyeceÄŸiz

              def run():
                  while True:
                      photo_name = input()

                      if photo_name == â€œâ€:
                          break
                      else:
                          find_thanos(photo_name)
              run()
            </code></pre>

          <p>GÃ¶rÃ¼ntÃ¼yÃ¼ bilgisayarÄ±nÄ±zda kayÄ±tlÄ± adÄ±nÄ± kullanarak koda yÃ¼klememiz gerekiyor.</p>

          <pre><code>
            def find_thanos(photo_name):
                # Bu kod satÄ±rÄ± fotoÄŸrafÄ± okuyup kullanÄ±labilir hale getirir
                image = cv2.imread(photo_name)
          </code></pre>

          <p>SonrasÄ±nda renk uzayÄ±nÄ± deÄŸiÅŸtireceÄŸiz.Renk uzayÄ±, renkleri dÃ¼zenlediÄŸimiz bir sistem. FarklÄ± durumlar iÃ§in kullanabileceÄŸiniz birkaÃ§ uzay var. Ancak, bence, OpenCV ile Ã§alÄ±ÅŸmasÄ± en kolay olan HSV. Hepsini <a href="https://docs.opencv.org/trunk/d8/d01/group__imgproc__color__conversions.html">burada</a> bulabilirsiniz.</p>

          <pre><code>
            def find_thanos(photo_name):
                image = cv2.imread(photo_name)

                # Renk uzayÄ± deÄŸiÅŸimlerini yapacak olan fonksiyon
                image = cv2.cvtColor(image, cv2.COLOR_BGR2HSV)
          </code></pre>

          <p>Bu iÅŸlemi, Thanos'un mor rengini kolayca tespit etmek iÃ§in yaptÄ±k. Åimdi hangi piksellerin mor olduÄŸunu bulabiliriz. HSVâ€™nin aÃ§Ä±lÄ±mÄ± Hue (Ton), Saturation (Doygunluk) ve Value (DeÄŸer).</p>
          
          <a href="../img/colorspaces.png">
            <img class="img-fluid" src="../img/colorspaces.png" alt="">
          </a>
          <span class="caption text-muted"><a href="http://www.tadpolewebworks.com/web/atomic/highlights.html">FotoÄŸrafÄ±n kaynaÄŸÄ±</a> iÃ§in tÄ±klayÄ±n.</span>

          <p>Hue, bir aÃ§Ä± deÄŸeridir. Rengi belirler. Saturation beyaz ile renklilik arasÄ±nda bir deÄŸiÅŸimdir. DeÄŸer ise siyah ve renklilik arasÄ±nda bir deÄŸiÅŸimdir. Python iÃ§in maksimum deÄŸerler 360, 100 ve 100 yerine 180, 255 ve 255'tir.</p>
          
          <p>Ä°ki HSV deÄŸerini sÄ±nÄ±r olarak belirleyeceÄŸiz ve OpenCV, gÃ¶rÃ¼ntÃ¼de piksel deÄŸerlerinin sÄ±nÄ±rlarÄ±mÄ±z arasÄ±nda nerede olduÄŸunu tespit edecek. Bu deÄŸerleri genelde deneyerek buluyoruz.</p>

          <pre><code>
            # Mor renk iÃ§in HSV sÄ±nÄ±r deÄŸerleri
            lower_bound = np.array([40, 70, 70])
            upper_bound = np.array([180, 255, 255])
          </code></pre>   
          
          <p>Åimdi bu sÄ±nÄ±rlarÄ±, mor rengi bulmak iÃ§in kullanacaÄŸÄ±z. Bir Mask yapacaÄŸÄ±z. Mask (Maske), openCV'deki Ã¶zel bir gÃ¶rÃ¼ntÃ¼ ÅŸekli. Bizim durumumuzda, eÄŸer renk sÄ±nÄ±rlar arasÄ±ndaysa maskedeki piksel beyaz olacaktÄ±r. Aksi takdirde, siyah olacaktÄ±r.</p>

          <pre><code>
            mask = cv2.inRange(image, lower_bound, upper_bound)
          </code></pre>

          <p>Kodumuzun Thanos'un rengini tespit edip edemediÄŸini gÃ¶relim.</p>

          <pre><code>
            # Resmi kullanÄ±cÄ±ya gÃ¶stermek iÃ§in gereken kod
            cv2.imshow(â€œmaskâ€, mask)

            # Kodu durdurup boÅŸluk tuÅŸuna basmanÄ±zÄ± bekleyen kod
            cv2.waitKey(0)
          </code></pre>

          <p>Test fotoÄŸrafÄ±mÄ±zÄ±n maskesi bu ÅŸekilde oldu:</p>
          <a href="../img/thanos_masked_opencv.png">
            <img class="img-fluid" src="../img/thanos_masked_opencv.png" alt="">
          </a>
          <span class="caption text-muted">Mor renkle maskelenmiÅŸ Thanos.</span>

          <p>Ã‡ok iyi gÃ¶rÃ¼nÃ¼yor ğŸ‘</p>

          <p>Ama Starkâ€™Ä±n makinelerinin bu resmi anlayabilmesini nasÄ±l saÄŸlayacaÄŸÄ±z? BirkaÃ§ satÄ±r kod ekleyelim. BasitÃ§e, beyaz piksellerin tÃ¼m resme olan oranÄ±nÄ± bulacaÄŸÄ±z. EÄŸer mor renk oranÄ± yÃ¼kselirse, Thanos olma ihtimali yÃ¼kselir diyeceÄŸiz.</p>
          
          <pre><code>
            # Toplam kaÃ§ piksel olduÄŸunu bulalÄ±m
            num_of_pixels = mask.shape[0] * mask.shape[1]

            # Beyaz olanlarÄ±n sayÄ±sÄ±nÄ± bulalÄ±m
            num_of_white = np.sum(mask == 255)

            # OranÄ± hesaplayalÄ±m
            ratio = num_of_white / num_of_pixels
          </code></pre>

          <p>O zaman, yÃ¼ksek olasÄ±lÄ±kla Thanos var diyorsak bu veriyi Yenilmezler ekibinin gÃ¶rebilmesi iÃ§in yazdÄ±ralÄ±m.</p>

          <pre><code>
            if ratio > 0.2:
                print("I found someone like Thanos! The probability is", ratio*100, "%") # Thanos olabilir
            else:
                print("Not Thanos. The probability is", ratio*100, "%â€) # Thanos deÄŸildir
          </code></pre>

          <p>Kodumuz Ã§alÄ±ÅŸÄ±yor gibi gÃ¶rÃ¼nÃ¼yor! BazÄ± test sonuÃ§larÄ± burada:</p>

          <a href="../img/cap_hulk_thanos_test_opencv.png">
            <img class="img-fluid" src="../img/cap_hulk_thanos_test_opencv.png" alt="">
          </a>

          <p>OkuduÄŸunuz iÃ§in teÅŸekkÃ¼rler. Sonraki yazÄ±larda gÃ¶rÃ¼ÅŸmek Ã¼zere!</p>
        </div>
      </div>
    </div>
  </article>

  <hr>

  <!-- Footer -->
  <footer>
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-md-10 mx-auto">
          <ul class="list-inline text-center">
            <li class="list-inline-item">
              <a href="#">
                <span class="fa-stack fa-lg">
                  <i class="fas fa-circle fa-stack-2x"></i>
                  <i class="fab fa-twitter fa-stack-1x fa-inverse"></i>
                </span>
              </a>
            </li>
            <li class="list-inline-item">
              <a href="#">
                <span class="fa-stack fa-lg">
                  <i class="fas fa-circle fa-stack-2x"></i>
                  <i class="fab fa-facebook-f fa-stack-1x fa-inverse"></i>
                </span>
              </a>
            </li>
            <li class="list-inline-item">
              <a href="#">
                <span class="fa-stack fa-lg">
                  <i class="fas fa-circle fa-stack-2x"></i>
                  <i class="fab fa-github fa-stack-1x fa-inverse"></i>
                </span>
              </a>
            </li>
          </ul>
          <p class="copyright text-muted">Copyright &copy; Cihan Alperen BosnalÄ± 2019</p>
        </div>
      </div>
    </div>
  </footer>

  <!-- Bootstrap core JavaScript -->
  <script src="../vendor/jquery/jquery.min.js"></script>
  <script src="../vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

  <!-- Custom scripts for this template -->
  <script src="../js/clean-blog.min.js"></script>

</body>

</html>
